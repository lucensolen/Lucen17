:root { --bg:#0b0f14; --card:#141a22; --text:#e8eef6; --muted:#9fb2c7; --accent:#ffc857; --ok:#30d158; --bad:#ff453a; --blue:#5aa7ff; --orange:#ffb156; --yellow:#ffe36b;}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial;background:var(--bg);color:var(--text)}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #202a35;position:sticky;top:0;background:#0b0f14cc;backdrop-filter:blur(6px)}
.status #onlineBadge{padding:4px 10px;border-radius:999px;background:#263240;color:#9fb2c7}
.status #onlineBadge.online{background:#13361f;color:#b7f3c5}
.beam{height:6px;flex:1;margin:0 12px;border-radius:999px;background:linear-gradient(90deg,#20406a,#ffc857);animation:beamPulse 3s ease-in-out infinite}
@keyframes beamPulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}

/* === Lucen Chroma Beam Color Sync (Stage 4.3) === */
#beam {
  --beam-color: #999;
  background: var(--beam-color);
  box-shadow: 0 0 20px 4px var(--beam-color);
  transition: background 1s linear, box-shadow 1s linear;
}
.tabs{display:flex;gap:8px;padding:10px 16px;border-bottom:1px solid #202a35}
.tabs button{background:#18222e;color:var(--muted);border:1px solid #223042;border-radius:10px;padding:8px 12px;cursor:pointer}
.tabs button.active{color:var(--text);border-color:#2d3d53;background:#1c2836}

main{padding:16px;max-width:900px;margin:0 auto}
.panel{display:none}
.panel.active{display:block}
.row{display:flex;gap:8px;align-items:center;margin:8px 0;flex-wrap:wrap}
textarea,input[type="url"],input[type="number"],select{background:#0f141b;color:var(--text);border:1px solid #223042;border-radius:10px;padding:10px 12px}
textarea, input[type="url"]{width:100%}
button{background:#1f2a38;color:var(--text);border:1px solid #2a3b52;border-radius:10px;padding:10px 12px;cursor:pointer}
button:hover{background:#243246}

.controls{display:grid;grid-template-columns:1fr 1fr auto;gap:12px;margin-bottom:12px}
.slider label,.mode label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
.mode-buttons button{margin-right:6px}

.list{display:grid;gap:10px;margin-top:8px}
.card{background:var(--card);border:1px solid #1f2a33;border-radius:12px;padding:12px;position:relative;overflow:hidden}
.card .tone{font-size:12px;color:var(--muted)}
.card .ts{font-size:12px;color:#7f93ab}
.card .txt{margin-top:4px;line-height:1.4}
.node{position:absolute;bottom:8px;right:8px;width:10px;height:10px;border-radius:50%;opacity:.85;animation:nodePulse 3s ease-in-out infinite}
.node.blue{background:var(--blue)}
.node.orange{background:var(--orange)}
.node.yellow{background:var(--yellow)}
@keyframes nodePulse{0%{transform:scale(.9);opacity:.7}50%{transform:scale(1.15);opacity:1}100%{transform:scale(.9);opacity:.7}}

/* === Division Panel Visuals === */

.division {
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 12px;
  margin: 8px 0;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.05);
  transition: background 0.2s ease;
}

.division:hover {
  background: rgba(255, 255, 255, 0.08);
}

.division h3 {
  font-size: 1.1em;
  margin-bottom: 6px;
  color: #fff;
}

.division p {
  font-size: 0.9em;
  opacity: 0.8;
  margin-bottom: 8px;
}

.division ul {
  list-style: none;
  padding-left: 0;
  margin-bottom: 8px;
}

.division ul li {
  font-size: 0.85em;
  opacity: 0.9;
  margin: 3px 0;
}

.division label {
  display: block;
  font-size: 0.8em;
  margin-top: 6px;
  opacity: 0.8;
}

.division input[type="number"],
.division input[type="text"] {
  width: 100%;
  margin-top: 2px;
  margin-bottom: 6px;
  padding: 6px;
  border: none;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  font-size: 0.85em;
}

.division input:focus {
  outline: 1px solid rgba(255, 255, 255, 0.25);
}

#lensRouting {
  margin-top: .6rem;
  display: flex;
  gap: .5rem;
}
#lensRouting select {
  flex: 1;
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 6px;
  color: #fff;
  font-size: .9rem;
  padding: .3rem .5rem;
}
#lensRouting option { color: #000; }

/* === General Panel Alignment === */

.panel {
  padding: 14px;
  color: #fff;
}

#coreSyncDot {
  transition: color 0.6s ease, box-shadow 2s ease;
}
